{
    "$schema": "http://json-schema.org/draft-06/schema#",
    "id": "https://github.com/OpenDataServices/social-finance-data-spec/blob/master/schema/schema.json",
    "title": "Social Finance Data Specification",
    "description": "A draft schema for describing social finance deals",
    "type": "object",
    "properties": {
        "deal": {
            "title": "Deal",
            "description": "A social finance deal",
            "type": "object",
            "required": ["identifier","title","recipientOrganisation","arrangingOrganisation"],
            "properties": {
                "identifier": {
                    "title": "Identifier",
                    "description": "Unique internal identifier for the social finance deal.",
                    "type": "string"
                },
                "title": {
                    "title": "Title",
                    "description": "A title for the deal. Ideally, this is concise and under 140 characters.",
                    "type": "string"
                },
                "status": {
                    "title": "Status",
                    "description": "Current status of the blended finance deal: in progress, an open investment, closed without funds being drawn down, closed without core funds being approved.",
                    "type": "string",
                    "enum": ["Pipeline","Open Investment","Closed"]
                },
                "recipientOrganisation": {
                    "title": "Recipient Organisation",
                    "description": "The organisation in receipt of the funds from the social finance deal.",
                    "$ref": "#/definitions/organisation"
                },
                "arrangingOrganisation": {
                    "title": "Arranging Organisation",
                    "description": "The organisation arranging the social finance deal.",
                    "$ref": "#/definitions/organisation"
                },
                "dealDate": {
                    "title": "Deal date",
                    "type": ["string","null"],
                    "format": "date-time",
                    "description": "The date that the deal was awarded. Dates should be in yyyy-mm-dd format."
                },
                "investments": {
                    "title": "Investments",
                    "type": "object",
                    "properties": {
                        "grants": {
                            "title": "Grants",
                            "description": "Grants made as part of the social investment deal.",
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/grant"
                            }
                        },
                        "equity": {
                            "title": "Equity Investments",
                            "description": "Equity components of the social investment deal.",
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/equity"
                            }
                        }
                    }
                },
                "dateModified": {
                    "title": "Last modified",
                    "type": ["string","null"],
                    "format": "date-time",
                    "description": "The date and time about when any part of the information for this deal was last updated. Should be in yyyy-mm-ddThh:mm:ssZ format."
                },
                "dataSource": {
                  "title": "Data Source",
                  "type": ["string","null"],
                  "format": "uri",
                  "description": "A web link pointing to the source of this data, such as the actual data file or the publisher's website."
                }
            }
        }
    },
    "definitions": {
        "organisation": {
            "type": "object",
            "properties": {
                "identifier": {
                    "title": "Identifier",
                    "type": "string"
                    },
                "name": {
                    "title": "Name",
                    "type": "string"
                }
            }
        },
        "grant": {
            "type": "object",
            "properties": {
                "identifier": {
                    "title": "Identifier",
                    "type": "string"
                },
                "currency": {
                    "title": "Currency",
                    "type": "string"
                }
            }
        },
        "loan": {
            "type": "object",
            "properties": {
                "identifier": {
                    "title": "Identifier",
                    "type": "string"
                },
                "currency": {
                    "title": "Currency",
                    "type": "string"
                }
            }
        },
        "equity": {
            "type": "object",
            "title": "Equity",
            "description": "An equity investment",
            "properties": {
                "identifier": {
                    "title": "Identifier",
                    "type": "string"
                },
                "currency": {
                    "title": "Currency",
                    "type": "string"
                }
            }
        }
    }
}
